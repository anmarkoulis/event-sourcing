graph LR
    A[Entry Point<br/>FastAPI] --> B[Command]
    A --> J[Query]

    B --> C[Command Handler]
    C --> D[Aggregate]
    D --> E[Event]
    E --> F[Event Store]
    E --> G[Event Handler]
    G --> H[Celery Tasks]
    H --> I[Projections]
    I --> K[Read Models]

    J --> L[Query Handler]
    L --> K

    style A fill:#e1f5fe
    style B fill:#e3f2fd
    style C fill:#fff3e0
    style D fill:#fff3e0
    style E fill:#e8f5e8
    style F fill:#f3e5f5
    style G fill:#fff3e0
    style H fill:#fff3e0
    style I fill:#fff3e0
    style J fill:#e3f2fd
    style K fill:#e8f5e8
    style L fill:#fff3e0

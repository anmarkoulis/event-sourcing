graph TD
    subgraph "Command Side (Write)"
        A[Command] --> B[Command Handler]
        B --> C[Aggregate]
        C --> D[Event Store]
        B --> E[Event Bus]
    end

    subgraph "Query Side (Read)"
        F[Query] --> G[Query Handler]
        G --> H[Read Model]
    end

    E --> I[Projections]
    I --> H

    style A fill:#e1f5fe
    style B fill:#e3f2fd
    style C fill:#fff3e0
    style D fill:#f3e5f5
    style E fill:#fff3e0
    style F fill:#e1f5fe
    style G fill:#e3f2fd
    style H fill:#e8f5e8
    style I fill:#fff3e0
